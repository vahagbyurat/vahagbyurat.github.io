;/*FB_PKG_DELIM*/

__d("PlatformDialog",["cx","CSS","DOMEvent","DOMEventListener"],(function(a,b,c,d,e,f,g){var h;a=function(){"use strict";a.getInstance=function(){return h};function a(a,c,d){var e=this;h=this;this.$1=a;this.$2=c;this.$3=!1;b("DOMEventListener").add(this.$1,"submit",function(c){if(e.$3){new(b("DOMEvent"))(c).kill();return}e.$3=!0;d&&b("CSS").addClass(a,"_32qa")})}var c=a.prototype;c.getForm=function(){return this.$1};c.getDisplay=function(){return this.$2};c.hasBeenSubmitted=function(){return this.$3};return a}();a.RESPONSE="platform/dialog/response";e.exports=a}),null);
__d("ArbiterFrame",[],(function(a,b,c,d,e,f){a={inform:function(a,b,c){var d=parent.frames,e=d.length,f;b.crossFrame=!0;for(var g=0;g<e;g++){f=d[g];try{if(!f||f==window)continue;f.require?f.require("Arbiter").inform(a,b,c):f.ServerJSAsyncLoader&&f.ServerJSAsyncLoader.wakeUp(a,b,c)}catch(a){}}}};e.exports=a}),null);
__d("PageHooks",["Arbiter","ErrorUtils","InitialJSLoader","PageEvents"],(function(a,b,c,d,e,f){var g;f={DOMREADY_HOOK:"domreadyhooks",ONLOAD_HOOK:"onloadhooks"};function h(){k(l.DOMREADY_HOOK),window.domready=!0,b("Arbiter").inform("uipage_onload",!0,"state")}function i(){k(l.ONLOAD_HOOK),window.loaded=!0}function j(a,c){return(g||(g=b("ErrorUtils"))).applyWithGuard(a,null,null,function(a){a.event_type=c,a.category="runhook"},"PageHooks:"+c)}function k(a){var b=a=="onbeforeleavehooks"||a=="onbeforeunloadhooks";do{var c=window[a];if(!c)break;b||(window[a]=null);for(var d=0;d<c.length;d++){var e=j(c[d],a);if(b&&e)return e}}while(!b&&window[a])}function c(){window.domready||(window.domready=!0,k("onloadhooks")),window.loaded||(window.loaded=!0,k("onafterloadhooks"))}function d(){var a,c;(a=b("Arbiter")).registerCallback(h,[(c=b("PageEvents")).BIGPIPE_DOMREADY,b("InitialJSLoader").INITIAL_JS_READY]);a.registerCallback(i,[c.BIGPIPE_DOMREADY,c.BIGPIPE_ONLOAD,b("InitialJSLoader").INITIAL_JS_READY]);a.subscribe(c.NATIVE_ONBEFOREUNLOAD,function(a,b){b.warn=k("onbeforeleavehooks")||k("onbeforeunloadhooks"),b.warn||(window.domready=!1,window.loaded=!1)},"new");a.subscribe(c.NATIVE_ONUNLOAD,function(a,b){k("onunloadhooks"),k("onafterunloadhooks")},"new")}var l=babelHelpers["extends"]({_domreadyHook:h,_onloadHook:i,runHook:j,runHooks:k,keepWindowSetAsLoaded:c},f);d();a.PageHooks=e.exports=l}),null);
__d("WebPixelRatio",["SiteData"],(function(a,b,c,d,e,f,g){function a(){return c("SiteData").pr!=null&&c("SiteData").pr>0?c("SiteData").pr:window.devicePixelRatio||1}g.get=a}),98);
__d("PixelRatioConst",[],(function(a,b,c,d,e,f){a=Object.freeze({cookieName:"dpr"});f["default"]=a}),66);
__d("WebPixelRatioDetector",["Cookie","DOMEventListener","PixelRatioConst","Run","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=!1,j=!1;function k(){return window.devicePixelRatio||1}function l(){c("Cookie").set(c("PixelRatioConst").cookieName,String(k()))}function m(){c("Cookie").clear(c("PixelRatioConst").cookieName)}function n(){if(i)return;i=!0;j&&m();k()!==d("WebPixelRatio").get()&&l()}function a(a){a&&(j=!0);if(h)return;h=!0;"onpagehide"in window&&d("DOMEventListener").add(window,"pagehide",n);d("Run").onBeforeUnload(n,!1)}g.startDetecting=a}),98);
__d("Queue",[],(function(a,b,c,d,e,f){var g={};a=function(){function a(a){this._timeout=null,this._interval=(a==null?void 0:a.interval)||0,this._processor=a==null?void 0:a.processor,this._queue=[],this._stopped=!0}var b=a.prototype;b._dispatch=function(a){var b=this;a===void 0;if(this._stopped||this._queue.length===0)return;a=this._processor;if(a==null){this._stopped=!0;throw new Error("No processor available")}var c=this._interval;if(c!=null)a.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return b._dispatch()},c);else while(this._queue.length)a.call(this,this._queue.shift())};b.enqueue=function(a){this._processor&&!this._stopped?this._processor(a):this._queue.push(a);return this};b.start=function(a){a&&(this._processor=a);this._stopped=!1;this._dispatch();return this};b.isStarted=function(){return!this._stopped};b.dispatch=function(){this._dispatch(!0)};b.stop=function(a){this._stopped=!0;a&&this._timeout!=null&&clearTimeout(this._timeout);return this};b.merge=function(a,b){if(b){(b=this._queue).unshift.apply(b,a._queue)}else{(b=this._queue).push.apply(b,a._queue)}a._queue=[];this._dispatch();return this};b.getLength=function(){return this._queue.length};a.get=function(b,c){var d;b in g?d=g[b]:d=g[b]=new a(c);return d};a.exists=function(a){return a in g};a.remove=function(a){return delete g[a]};return a}();f["default"]=a}),66);
__d("resolveWindow",[],(function(a,b,c,d,e,f){function a(a){if(a==null)return null;var b=window;a=a.split(".");try{for(var c=0;c<a.length;c++){var d=a[c],e=/^frames\[[\'\"]?([a-zA-Z0-9\-_]+)[\'\"]?\]$/.exec(d);if(e)b=b.frames[e[1]];else if(d==="opener"||d==="parent"||d==="top")b=b[d];else return null}}catch(a){return null}return b}f["default"]=a}),66);
__d("ObservableMixin",[],(function(a,b,c,d,e,f){function a(){this.__observableEvents={}}a.prototype={inform:function(a){var b=Array.prototype.slice.call(arguments,1),c=Array.prototype.slice.call(this.getSubscribers(a));for(var d=0;d<c.length;d++){if(c[d]===null)continue;try{c[d].apply(this,b)}catch(a){window.setTimeout(function(){throw a},0)}}return this},getSubscribers:function(a){return this.__observableEvents[a]||(this.__observableEvents[a]=[])},clearSubscribers:function(a){a&&(this.__observableEvents[a]=[]);return this},subscribe:function(a,b){a=this.getSubscribers(a);a.push(b);return this},unsubscribe:function(a,b){a=this.getSubscribers(a);for(var c=0;c<a.length;c++)if(a[c]===b){a.splice(c,1);break}return this}};e.exports=a}),null);
__d("AssertionError",["ManagedError"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(c("ManagedError"));g["default"]=a}),98);
__d("Assert",["AssertionError","sprintf"],(function(a,b,c,d,e,f,g){function h(a,b){if(typeof a!=="boolean"||a===!1)throw new(c("AssertionError"))(b);return a}function i(a,b,d){var e;if(b===void 0)e="undefined";else if(b===null)e="null";else{var f=Object.prototype.toString.call(b);f=/\s(\w*)/.exec(f);e=f==null?typeof f:f[1].toLowerCase()}h(a.indexOf(e)!==-1,(f=d)!=null?f:c("sprintf")("Expression is of type %s, not %s",e,a));return b}function a(a,b,c){h(b instanceof a,(a=c)!=null?a:"Expression not instance of type");return b}function j(a,b){k["is"+a]=b,k["maybe"+a]=function(a,c){return a==null?a:b(a,c)}}b=function(a,b){return a};var k={isInstanceOf:a,isTrue:h,isTruthy:function(a,b){return h(!!a,b)},isBoolean:b,isFunction:b,isNumber:b,isObject:b,isString:b,isUndefined:b,maybeObject:b,maybeNumber:b,maybeFunction:b};["Boolean","Function","Number","Object","String","Undefined"].forEach(function(a){j(a,i.bind(null,a.toLowerCase()))});d=k;g["default"]=d}),98);
__d("Type",["Assert"],(function(a,b,c,d,e,f){function g(){var a=this.__mixins;if(a)for(var b=0;b<a.length;b++)a[b].apply(this,arguments)}function h(a,b){if(b instanceof a)return!0;if(b instanceof g)for(var c=0;c<b.__mixins.length;c++)if(b.__mixins[c]==a)return!0;return!1}function i(a,b){var c=a.prototype;Array.isArray(b)||(b=[b]);for(a=0;a<b.length;a++){var d=b[a];typeof d==="function"&&(c.__mixins.push(d),d=d.prototype);Object.keys(d).forEach(function(a){c[a]=d[a]})}}function j(a,c,d){var e=c&&Object.prototype.hasOwnProperty.call(c,"constructor")?c.constructor:function(){this.parent.apply(this,arguments)};b("Assert").isFunction(e);if(a&&a.prototype instanceof g===!1)throw new Error("parent type does not inherit from Type");a=a||g;function f(){}f.prototype=a.prototype;e.prototype=new f();c&&Object.assign(e.prototype,c);e.prototype.constructor=e;e.parent=a;e.prototype.__mixins=a.prototype.__mixins?Array.prototype.slice.call(a.prototype.__mixins):[];d&&i(e,d);e.prototype.parent=function(){this.parent=a.prototype.parent,a.apply(this,arguments)};e.prototype.parentCall=function(b){return a.prototype[b].apply(this,Array.prototype.slice.call(arguments,1))};e.extend=function(a,b){return j(this,a,b)};return e}Object.assign(g.prototype,{instanceOf:function(a){return h(a,this)}});Object.assign(g,{extend:function(a,b){return typeof a==="function"?j.apply(null,arguments):j(null,a,b)},instanceOf:h});e.exports=g}),null);
__d("sdk.Model",["ObservableMixin","Type"],(function(a,b,c,d,e,f,g){"use strict";a=c("Type").extend({constructor:function(a){this.parent();var b={},c=this;Object.keys(a).forEach(function(d){b[d]=a[d],c["set"+d]=function(a){if(a===b[d])return c;b[d]=a;c.inform(d+".change",a);return c},c["get"+d]=function(){return b[d]}})}},c("ObservableMixin"));b=a;g["default"]=b}),98);
__d("sdk.Runtime",["JSSDKRuntimeConfig","sdk.Model"],(function(a,b,c,d,e,f,g){var h={UNKNOWN:0,PAGETAB:1,CANVAS:2,PLATFORM:4},i=new(c("sdk.Model"))({AccessToken:"",AutoLogAppEvents:!1,ClientID:"",CookieUserID:"",EnforceHttps:!1,Environment:h.UNKNOWN,FamilyLoginLoaded:!1,GraphDomain:"",Initialized:!1,IsSPIN:Boolean((a=d("JSSDKRuntimeConfig")).isSPIN),IsVersioned:!1,KidDirectedSite:void 0,Locale:a.locale,LoggedIntoFacebook:void 0,LoginStatus:void 0,Revision:a.revision,Rtl:a.rtl,Scope:void 0,SDKAB:a.sdkab,SDKUrl:a.sdkurl,SDKNS:a.sdkns,ShouldLoadFamilyLogin:!1,UseCookie:!1,UseLocalStorage:!0,UserID:"",Version:void 0});Object.assign(i,{ENVIRONMENTS:h,isEnvironment:function(a){var b=this.getEnvironment();return(a|b)===b},isCanvasEnvironment:function(){return this.isEnvironment(h.CANVAS)||this.isEnvironment(h.PAGETAB)}});(function(){var a=/app_runner/.test(window.name)?h.PAGETAB:/iframe_canvas/.test(window.name)?h.CANVAS:h.UNKNOWN;(a|h.PAGETAB)===a&&(a|=h.CANVAS);i.setEnvironment(a)})();b=i;g["default"]=b}),98);
__d("UrlMap",["invariant","UrlMapConfig","sdk.Runtime"],(function(a,b,c,d,e,f,g,h){function a(a){var b="https";if(a==="graph_domain"){var e=c("sdk.Runtime").getGraphDomain();e?a="graph_".concat(e):a="graph"}if(a in d("UrlMapConfig"))return b+"://"+d("UrlMapConfig")[a];a in d("UrlMapConfig")||h(0,2511,a);return""}g.resolve=a}),98);
__d("sdk.Scribe",["QueryString","UrlMap","sdk.Runtime"],(function(a,b,c,d,e,f,g){var h={};function a(a,b,e){e===void 0&&(e=!1);if(a==="jssdk_error"){var f=JSON.stringify(b);if(Object.prototype.hasOwnProperty.call(h,f))return;else h[f]=!0}if(b.extra!=null&&typeof b.extra==="object"){f=b.extra;f.revision=c("sdk.Runtime").getRevision()}f=new Image();var g=d("UrlMap").resolve("www")+"/platform/scribe_endpoint.php/";e||(f.crossOrigin="anonymous");f.src=c("QueryString").appendToUrl(g,{c:a,m:JSON.stringify(babelHelpers["extends"]({},b,{isSPIN:c("sdk.Runtime").getIsSPIN()}))})}g.log=a}),98);
__d("XD",["Arbiter","DOM","DOMDimensions","Log","PHPQuerySerializer","Queue","URI","isFacebookURI","isInIframe","resolveWindow","sdk.Scribe"],(function(a,b,c,d,e,f,g){var h,i,j={_callbacks:[],_opts:{autoResize:!1,allowShrink:!0,channelUrl:null,hideOverflow:!1,resizeTimeout:1e3,resizeWidth:!1},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,_shrinker:null,_forcedMinWidth:100,init:function(a){var b=this;this._opts=babelHelpers["extends"]({},this._opts,a);this._opts.autoResize&&this._startResizeMonitor();c("Arbiter").subscribe("Connect.Unsafe.resize.ack",function(a,c){c.id||(c.id=b._resizeCount),c.id>b._lastResizeAckId&&(b._lastResizeAckId=c.id)})},getQueue:function(){this._queue||(this._queue=new(c("Queue"))());return this._queue},setChannelUrl:function(a){var b=this;this.getQueue().start(function(c){return b.send(c,a)})},send:function(a,b){a===void 0&&(a=null);b===void 0&&(b=null);b=b||this._opts.channelUrl;if(!b){this.getQueue().enqueue(a);return}var e={};b=new(i||(i=c("URI")))(b);Object.assign(e,a,(h||(h=d("PHPQuerySerializer"))).deserialize(b.getFragment()));b=new i(e.origin);if(b.getDomain()===""){d("Log").error("No valid domain for XD message target.");return}var f=b.getOrigin();if(typeof e.relation!=="string"){d("Log").error("No relation specified to resolve XD target window.");return}var g=c("resolveWindow")(e.relation.replace(/^parent\./,"")),j=1;b=function b(){try{g.postMessage((h||(h=d("PHPQuerySerializer"))).serialize(e),f)}catch(c){--j?window.setTimeout(b,200):d("sdk.Scribe").log("jssdk_error",{error:"POST_MESSAGE",extra:{message:c.message+", html/js/modules/XD.js:139",ancestor_origins:JSON.stringify(location.ancestorOrigins),referrer:document.referrer,data:a}})}};b()},_computeSize:function(){var a=d("DOMDimensions").getDocumentDimensions(),b=0;if(this._opts.resizeWidth){var e=document.body;if(e!=null){if(e.clientWidth<e.scrollWidth)b=a.width;else{e=e.lastElementChild;if(e!=null&&e instanceof HTMLElement){e=e;e=e.offsetLeft+e.offsetWidth;e>b&&(b=e)}}b=Math.max(b,j._forcedMinWidth)}else b=j._forcedMinWidth}a.width=b;this._opts.allowShrink&&(this._shrinker||(this._shrinker=c("DOM").create("div")),c("DOM").appendContent(document.body,this._shrinker),a.height=Math.max(this._shrinker.offsetTop,0));return a},_startResizeMonitor:function(){var a,b=this,d;a=(a=document.documentElement)!=null?a:{};if(this._opts.hideOverflow){a.style.overflow="hidden";((a=document.body)!=null?a:{}).style.overflow="hidden"}a=function(){var a=b._computeSize(),e=Date.now();if(!d||b._opts.allowShrink&&d.width!=a.width||!b._opts.allowShrink&&d.width<a.width||b._opts.allowShrink&&d.height!=a.height||!b._opts.allowShrink&&d.height<a.height){d=a;b._resizeCount++;b._resizeTimestamp=e;e={type:"resize",height:a.height,ackData:{id:b._resizeCount},width:0};a.width&&a.width!=0&&(e.width=a.width);try{if(c("isFacebookURI")(new(i||(i=c("URI")))(document.referrer))&&c("isInIframe")()&&window.name&&window.parent.location&&window.parent.location.toString&&c("isFacebookURI")(new(i||(i=c("URI")))(window.parent.location))){a=window.parent.document.getElementsByTagName("iframe");for(var f=0;f<a.length;f++)a[f].name==window.name&&(b._opts.resizeWidth&&(a[f].style.width=e.width+"px"),a[f].style.height=e.height+"px")}b.send(e)}catch(a){b.send(e)}}};a();window.setInterval(a,this._opts.resizeTimeout)}};b=babelHelpers["extends"]({},j);a.UnverifiedXD=b;a.XD=j;g.XD=j;g.UnverifiedXD=b}),98);
__d("Plugin",["Arbiter","ArbiterFrame"],(function(a,b,c,d,e,f){var g={CONNECT:"platform/plugins/connect",DISCONNECT:"platform/plugins/disconnect",ERROR:"platform/plugins/error",RELOAD:"platform/plugins/reload",DIALOG:"platform/plugins/dialog",connect:function(a,c){a={identifier:a,href:a,story_fbid:c};b("Arbiter").inform(g.CONNECT,a);b("ArbiterFrame").inform(g.CONNECT,a)},disconnect:function(a,c){a={identifier:a,href:a,story_fbid:c};b("Arbiter").inform(g.DISCONNECT,a);b("ArbiterFrame").inform(g.DISCONNECT,a)},error:function(a,c){b("Arbiter").inform(g.ERROR,{action:a,content:c})},reload:function(a){b("Arbiter").inform(g.RELOAD,{reloadUrl:a||""}),b("ArbiterFrame").inform(g.RELOAD,{reloadUrl:a||""})},reloadOtherPlugins:function(a,c){b("ArbiterFrame").inform(g.RELOAD,{reloadUrl:"",reload:a||"",identifier:c||""})}};e.exports=g}),null);
__d("UnverifiedXD",["XD"],(function(a,b,c,d,e,f,g){g["default"]=d("XD").UnverifiedXD}),98);
__d("getOffsetParent",["Style"],(function(a,b,c,d,e,f){function g(a){a=a.parentNode;if(!a||a===document.documentElement)return document.documentElement;return b("Style").get(a,"position")!=="static"?a:a===document.body?document.documentElement:g(a)}e.exports=g}),null);
__d("PluginResize",["Locale","Log","UnverifiedXD","getOffsetParent","getStyleProperty"],(function(a,b,c,d,e,f){function g(a){a=a||document.body;var c=0,d=b("getOffsetParent")(a);b("Locale").isRTL()&&d?c=d.offsetWidth-a.offsetLeft-a.offsetWidth:b("Locale").isRTL()||(c=a.offsetLeft);return h(a)+c}function h(a){return Math.ceil(parseFloat(b("getStyleProperty")(a,"width")))||a.offsetWidth}function i(a){a=a||document.body;return a.offsetHeight+a.offsetTop}function j(a,b,c){this.calcWidth=a||g,this.calcHeight=b||i,this.width=void 0,this.height=void 0,this.event=c||"resize"}Object.assign(j.prototype,{resize:function(){var a=this.calcWidth(),c=this.calcHeight();(a!==this.width||c!==this.height)&&(b("Log").debug("Resizing Plugin: (%s, %s, %s, %s)",a,c,this.event),this.width=a,this.height=c,b("UnverifiedXD").send({type:this.event,width:a,height:c}));return this},auto:function(a){setInterval(this.resize.bind(this),a||250);return this}});j.auto=function(a,b,c){return new j(g.bind(null,a),i.bind(null,a),b).resize().auto(c)};j.autoHeight=function(a,b,c,d){return new j(function(){return a},i.bind(null,b),c).resize().auto(d)};j.getElementWidth=h;e.exports=j}),null);
__d("StrSet",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$2={},this.$1=0,a&&this.addAll(a)}var b=a.prototype;b.add=function(a){Object.prototype.hasOwnProperty.call(this.$2,a)||(this.$2[a]=!0,this.$1++);return this};b.addAll=function(a){a.forEach(this.add,this);return this};b.remove=function(a){Object.prototype.hasOwnProperty.call(this.$2,a)&&(delete this.$2[a],this.$1--);return this};b.removeAll=function(a){a.forEach(this.remove,this);return this};b.toArray=function(){return Object.keys(this.$2)};b.toMap=function(a){var b={};Object.keys(this.$2).forEach(function(c){b[c]=typeof a==="function"?a(c):a||!0});return b};b.contains=function(a){return Object.prototype.hasOwnProperty.call(this.$2,a)};b.count=function(){return this.$1};b.clear=function(){this.$2={};this.$1=0;return this};b.clone=function(){return new a(this)};b.forEach=function(a,b){Object.keys(this.$2).forEach(a,b)};b.map=function(a,b){return Object.keys(this.$2).map(a,b)};b.some=function(a,b){return Object.keys(this.$2).some(a,b)};b.every=function(a,b){return Object.keys(this.$2).every(a,b)};b.filter=function(b,c){return new a(Object.keys(this.$2).filter(b,c))};b.union=function(a){return this.clone().addAll(a)};b.intersect=function(a){return this.filter(function(b){return a.contains(b)})};b.difference=function(a){var b=this;return a.filter(function(a){return!b.contains(a)})};b.equals=function(a){var b=function(a,b){return a===b?0:a<b?-1:1},c=this.toArray();a=a.toArray();if(c.length!==a.length)return!1;var d=c.length;c=c.sort(b);a=a.sort(b);while(d--)if(c[d]!==a[d])return!1;return!0};return a}();f["default"]=a}),66);
__d("PlatformVersioning",["invariant","PlatformVersions","StrSet","getObjectValues"],(function(a,b,c,d,e,f,g){var h=new(b("StrSet"))(b("getObjectValues")(b("PlatformVersions").versions)),i=location.pathname;i=i.substring(1,i.indexOf("/",1));var j=h.contains(i)?i:b("PlatformVersions").versions.UNVERSIONED;function k(a,c){if(c==b("PlatformVersions").versions.UNVERSIONED)return a;h.contains(c)||g(0,3769);a=a.indexOf("/")!==0?"/"+a:a;return"/"+c+a}function a(){return b("PlatformVersions").LATEST}function c(a){return a.setPath(k(a.getPath(),j))}function d(a){return k(a,j)}function e(a){return h.contains(a.substring(1,a.indexOf("/",1)))?a.substring(a.indexOf("/",1)):a}i={addVersionToPath:k,getLatestVersion:a,versionAwareURI:c,versionAwarePath:d,getUnversionedPath:e};a=i;f["default"]=a}),66);
__d("PlatformWidgetEndpoint",["PlatformVersioning"],(function(a,b,c,d,e,f){function a(a,c){return b("PlatformVersioning").versionAwarePath("/dialog/"+a+(c?"/"+c:""))}function c(a,c){return b("PlatformVersioning").versionAwarePath("/plugins/"+a+(c?"/"+c:""))}function d(a){return/^\/plugins\//.test(b("PlatformVersioning").getUnversionedPath(a))}function f(a){return/^\/dialog\//.test(b("PlatformVersioning").getUnversionedPath(a))}a={dialog:a,plugins:c,isPluginEndpoint:d,isDialogEndpoint:f};e.exports=a}),null);
__d("PluginReturn",["invariant","Arbiter","Log","PlatformDialog","PlatformWidgetEndpoint","Plugin","URI"],(function(a,b,c,d,e,f,g){var h;b("Arbiter").subscribe(b("PlatformDialog").RESPONSE,function(a,c){if(c.error_code){b("Log").debug("Plugin Return Error (%s): %s",c.error_code,c.error_message||c.error_description);return}b("Plugin").reload(c.plugin_reload)});var i={auto:function(){b("Arbiter").subscribe(b("Plugin").RELOAD,function(a,b){a=typeof b==="object"?b.reloadUrl:b;i.reload(a)})},syncPlugins:function(){b("Arbiter").subscribe(b("Plugin").RELOAD,function(a,b){b.crossFrame&&i.reload(b.reloadUrl,b.reload,b.identifier)})},reload:function(a,c,d){d=(h||(h=b("URI"))).getRequestURI().removeQueryData("ret").removeQueryData("act").removeQueryData("hash").addQueryData("reload",c).addQueryData("id",d);if(a){var c=new(h||(h=b("URI")))(a);b("PlatformWidgetEndpoint").isPluginEndpoint(c.getPath())||g(0,1120);d.setPath(c.getPath()).addQueryData(c.getQueryData())}window.location.replace(d.toString())}};e.exports=i}),null);
__d("SecurePostMessage",["invariant"],(function(a,b,c,d,e,f,g){"use strict";var h="*";a={sendMessageToSpecificOrigin:function(a,b,c,d){c!==h||g(0,21157),a.postMessage(b,c,d)},sendMessageForCurrentOrigin:function(a,b){a.postMessage(b)},sendMessageAllowAnyOrigin_UNSAFE:function(a,b,c){a.postMessage(b,h,c)}};e.exports=a}),null);
__d("PluginXDReady",["Arbiter","Log","SecurePostMessage","UnverifiedXD"],(function(a,b,c,d,e,f,g){b={handleMessage:function(a){d("Log").debug("PluginXDReady at "+window.name+" handleMessage "+JSON.stringify(a));if(!a.method)return;try{c("Arbiter").inform("Connect.Unsafe."+a.method,JSON.parse(a.params),"persistent")}catch(a){}}};window.addEventListener("message",function(a){d("Log").debug("PluginXDReady at "+window.name+" received message "+JSON.stringify(a.data.message));if(a.data.xdArbiterSyn)d("SecurePostMessage").sendMessageAllowAnyOrigin_UNSAFE(a.source,{xdArbiterAck:!0});else if(a.data.xdArbiterHandleMessage){if(!a.data.message.method)return;try{c("Arbiter").inform("Connect.Unsafe."+a.data.message.method,JSON.parse(a.data.message.params),"persistent")}catch(a){}}},!1);a.XdArbiter=b;c("UnverifiedXD").send({xd_action:"plugin_ready",name:window.name});e=null;g["default"]=e}),98);
__d("TransportSelectingClientSingletonConditional",["cr:5800"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:5800")}),98);
__d("RDFDRequireDeferredReference",["RequireDeferredReference"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("RequireDeferredReference"));g["default"]=a}),98);
__d("requireDeferredForDisplay",["RDFDRequireDeferredReference"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(c("RDFDRequireDeferredReference"))(a)}g["default"]=a}),98);
__d("FbtLogging",["cr:1094907","cr:1290"],(function(a,b,c,d,e,f,g){"use strict";a=b("cr:1290")==null?void 0:b("cr:1290").JHashToSampleRate;c=b("cr:1094907")==null?void 0:b("cr:1094907").logImpression;g.m=a;g.logImpression=c}),98);
__d("IntlQtEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1848815");b=d("FalcoLoggerInternal").create("intl_qt_event",a);e=b;g["default"]=e}),98);
__d("FalcoAppUniverse",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2});c=a;f["default"]=c}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FBLogger","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),m=5*1024,n=(b=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue)!=null?b:60*1e3,o=(e=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?e:1e3;b=(f=(i||(i=c("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?f:1e3;var p="falco:",q=new(c("Queue"))(),r=5e3,s=6e4,t=c("uuidv4")(),u="ods_web_batch",v=new Map(),w=new Set(),x=new Set(),y=(e=c("FalcoAppUniverse").cast((i||(i=c("AnalyticsCoreData"))).app_universe))!=null?e:1,z=[],A=0,B=null,C=!1,D=!1,E=!1,F=!0,G=!1,H=Date.now()-s,I=1,J=b>n?b:n,K=b;Y();for(e=(f=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?f:[],b=Array.isArray(e),f=0,e=b?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var L;if(b){if(f>=e.length)break;L=e[f++]}else{f=e.next();if(f.done)break;L=f.value}L=L;w.add(L)}for(f=(L=(i||(i=c("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?L:[],b=Array.isArray(f),e=0,f=b?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(b){if(e>=f.length)break;L=f[e++]}else{e=f.next();if(e.done)break;L=e.value}L=L;x.add(L)}function M(){return(i||(i=c("AnalyticsCoreData"))).enable_bladerunner&&!(k||(k=c("ExecutionEnvironment"))).isInWorker}function N(a,b){T(b.item.name,"js.br.add_to_batch",1,!0);var c=b.item.extra.length;A+c>m&&(clearTimeout(B),O());z.push([a,b]);A+=c}function O(){B=null;C=!1;var a=z;R("js.br.send_batch",a.map(function(a){return a[1].item}));if(!G){S("js.br.init_not_complete.log",a.length);var b=function(){var b=a[c],d=b[0],e=b[1];T(e.item.name,"js.br.banzai_fallback_for_init_not_complete",1,!0);((b=e.item.logImmediate)!=null?b:!1)?U.logImmediately([e.item],function(a){return d.markItem(e,a)}):U.log([e.item],function(a){return d.markItem(e,a)})};for(var c=0;c<a.length;c++)b()}else q.enqueue(function(b){return b.log(a.map(function(a){return a[1].item}),function(b){if(!b){S("js.br.banzai_fallback",a.length);var c=function(){var c=a[d],b=c[0],e=c[1];T(e.item.name,"js.br.banzai_fallback_for_failure",1,!0);((c=e.item.logImmediate)!=null?c:!1)?U.logImmediately([e.item],function(a){return b.markItem(e,a)}):U.log([e.item],function(a){return b.markItem(e,a)})};for(var d=0;d<a.length;d++)c();return}for(c=0;c<a.length;c++){var e=a[c],f=e[0];e=e[1];T(e.item.name,"js.br.success_callback.batch.send_batch",1,!0);f.markItem(e,b)}})});z=[];A=0}function aa(a){return{events:a.map(function(a){return{name:a.name,extra:a.extra,rate:a.policy.r,time:a.time/1e3,tag:0,tags:a.tags,shouldAddState:a.shouldAddState,identity:P(a.identity),expTags:a.exptTags}})}}function ba(a){var b;a={deviceId:(i||(i=c("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:a,appId:i.app_id,appVersion:(a=(i||(i=c("AnalyticsCoreData"))).app_version)!=null?a:null,bundleId:null,consentState:null,identity:null,pushPhase:i.push_phase};((b=(b=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:b.length)!=null?b:0)>0&&(a.ambientState=(i||(i=c("AnalyticsCoreData"))).state_for_br);a.identity=P(i.identity);return Object.freeze(a)}function P(a){try{if(y===2){var b=a==null?void 0:a.appScopedIdentity;if(b!==void 0)return{appScopedIdentity:{uid:b,identifier:b,claims:[]}}}else{b=a==null?void 0:a.fbIdentity;if(b!==void 0)return{facebookIdentity:{actorId:b.actorId,accountId:b.accountId,claims:[]}}}}catch(a){(h||(h=d("ODS"))).bumpEntityKey(1344,"js.br.identity.propogation","exception.while.generating.identity",1)}return null}function Q(a,b){for(var e=0;e<a.length;e++){var f,g=a[e];T(g.name,"js.banzai.posting_event",1,!1);f=(f={},f.e=g.extra,f.r=g.policy.r,f.d=(i||(i=c("AnalyticsCoreData"))).device_id,f.s=d("WebSession").getId(),f.t=g.time,f);g.privacyContext&&(f.p=g.privacyContext);g.tags!=null&&(f.b=g.tags);var h=g.identity;h&&(f.id=h);c("Banzai").post(p+g.name,f,b)}R("planes.banzai.write_to_transport",a)}function R(a,b){var c=0;for(var d=0;d<b.length;d++){var e=b[d];e.name!==u&&(c+=1)}c>0&&S(a,c)}function S(a,b){var e="falco.fabric.www."+(i||(i=c("AnalyticsCoreData"))).push_phase;(h||(h=d("ODS"))).bumpEntityKey(1344,e,a,b)}function T(a,b,c,e){if(a===u)return!1;(h||(h=d("ODS"))).bumpEntityKey(1344,"falco.event."+a,b,c);e&&S(b,c);return!0}var U={log:function(a,b){R("js.banzai.post.log",a),Q(a,c("Banzai").BASIC),b(!0)},logImmediately:function(a,b){R("js.banzai.post.log_immediately",a),Q(a,c("Banzai").VITAL),b(!0)},logCritical:function(a,b){R("js.banzai.post.log_critical",a),Q(a,{signal:!0,retry:!0}),b(!0)}};function ca(a){Y();var b=V(a,"banzai_data_loss","log"),d=V(a,"banzai_data_loss","logImmediately"),e=V(a,"banzai_data_loss","logCritical"),f=V(a,"bladerunner_data_loss",""),g=V(a,"bladerunner_data_loss","logCritical");S("js.br_data_loss.posted."+a,1);if(G&&F)try{q.enqueue(function(b){return b.log([f],function(b){if(!b){S("js.br.transport_failure."+a,1);U.logCritical([g],function(b){S("js.br.failure_fallback_success_callback."+a,1)});return}S("js.br.success_callback."+a,1)})})}catch(b){S("js.br.error_enqueueing."+a,1),U.logCritical([g],function(b){S("js.br.enqueuing_fallback_success_callback."+a,1)})}else F||S("js.br.failed."+a,1),G||S("js.br.init_not_complete."+a,1),U.logCritical([g],function(b){S("js.br.init_fallback_success_callback."+a,1)});Q([b],c("Banzai").BASIC);Q([d],c("Banzai").VITAL);Q([e],{signal:!0,retry:!0})}function V(a,b,d){return{name:b,time:(j||(j=c("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:a,falco_js_connection_id:t,logging_mode:d,logging_flow_flag:"original_flow"})}}function W(){H+r<Date.now()&&(ca(I),H=Date.now(),I++)}function X(){window.setTimeout(function(){W(),I<=40&&X()},s)}function da(a){q.start(function(b){return b({log:function(d,b){R("planes.bladerunner.write_to_transport",d);var e=JSON.stringify(aa(d));a?(i||(i=c("AnalyticsCoreData"))).enable_ack?c("promiseDone")(a.amendWithAck(e),function(a){R("planes.bladerunner.ack_received"+a.toString(),d),b(a)},function(){R("planes.bladerunner.ack_failure",d),b(!1)}):(a.amendWithoutAck(e),R("planes.bladerunner.write_without_ack",d)):(R("planes.bladerunner.request_stream_null",d),b(!1))},logImmediately:function(b,a){this.log(b,a)},logCritical:function(b,a){this.log(b,a)}})})}function Y(){if(D)return;G=!1;if(!M())return;l.onReady(function(a){if(!a){F=!1;q.start(function(a){return a(U)});return}a=a;var b={onTermination:function(a){a.message==="Stream closed"?(q.stop(!0),D=!1):(F=!1,y===2&&((h||(h=d("ODS"))).bumpEntityKey(1344,"falco.ig.br.experiment","exception.when.br.stream.is.rejected",1),c("FBLogger")("ig_web","br_stream_rejected").catching(a).warn("BladeRunner stream is rejected")),q.start(function(a){return a(U)}))},onFlowStatus:function(){}};c("promiseDone")(a.requestStream({method:"Falco"},JSON.stringify(ba(d("WebSession").getId())),b,{requestId:""}).then(function(b){a=b,da(a),G=!0,J=n,K=o})["catch"](function(a){q.stop(!0),D=!1}))});D=!0}function Z(a){var b,d=a.name;if(!M()||!F)return!1;if(w.has(d)||a.policy.s!==1&&((b=(i||(i=c("AnalyticsCoreData"))).br_stateful_migration_on)!=null?b:!1)){a.shouldAddState=!0;return!0}return y!==1&&(i||(i=c("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!x.has(d)?!1:a.policy.s===1}function $(a){if(a==="")return null;if(v.has(a))return v.get(a);else{var b={claim:""},c=a.split("^#");if(c.length>=4){var d=c[0],e=c[1],f=c[2];c=c[3];f!==""?b={appScopedIdentity:f,claim:c}:d!==""&&(b={fbIdentity:{accountId:d,actorId:e},claim:c});v.set(a,b)}return b}}function a(){if(E)return;E=!0;c("PersistedQueue").setHandler("falco_queue_log",function(b){var c,d=b.getQueueNameSuffix(),e=$(d);while(c=b.dequeueItem())(function(c){Z(c.item)?(T(c.item.name,"js.use_bladerunner.log",1,!0),Y(),B==null&&(B=setTimeout(O,J)),e&&!a(d)&&(c.item.identity=e),N(b,c)):(T(c.item.name,"js.use_banzai.log",1,!0),e&&(c.item.identity=e),U.log([c.item],function(a){return b.markItem(c,a)}))})(c)});c("PersistedQueue").setHandler("falco_queue_immediately",function(b){var d,e=b.getQueueNameSuffix(),f=$(e);while(d=b.dequeueItem())(function(d){Z(d.item)?(T(d.item.name,"js.use_bladerunner.log_immediately",1,!0),Y(),(B==null||!C)&&(clearTimeout(B),B=setTimeout(O,K),C=!0),d.item.logImmediate=!0,f&&!a(e)&&(d.item.identity=f),N(b,d),c("PersistedQueue").isPersistenceAllowed()||(T(d.item.name,"js.br.send_immediately_no_persistence",1,!0),O())):(T(d.item.name,"js.use_banzai.log_immediately",1,!0),f&&(d.item.identity=f),U.logImmediately([d.item],function(a){return b.markItem(d,a)}))})(d)});c("PersistedQueue").setHandler("falco_queue_critical",function(b){var c,d=b.getQueueNameSuffix(),e=$(d);while(c=b.dequeueItem())(function(c){var f=c.item;Z(f)?(T(f.name,"js.use_bladerunner.log_critical",1,!0),Y(),!G?(T(f.name,"js.br.init_not_complete.logCritical",1,!0),e&&(f.identity=e),U.logCritical([f],function(a){return b.markItem(c,a)})):(e&&!a(d)&&(f.identity=e),q.enqueue(function(a){return a.logCritical([f],function(a){if(!a){S("js.br.banzai_fallback.critical",1);T(c.item.name,"js.br.banzai_fallback_for_failure.critical",1,!0);!f.identity&&e&&(f.identity=e);U.logCritical([f],function(a){return b.markItem(c,a)});return}T(c.item.name,"js.br.success_callback.batch.critical",1,!0);b.markItem(c,a)})}),a(d)||T(c.item.name,"js.bladerunner.identity.mismatch",1,!0))):(e&&(f.identity=e),T(f.name,"js.use_banzai.log_critical",1,!0),U.logCritical([f],function(a){return b.markItem(c,a)}))})(c)});(i||(i=c("AnalyticsCoreData"))).enable_dataloss_timer&&(Y(),W(),X());function a(a){try{var b=d("FalcoUtils").identityToString((i||(i=c("AnalyticsCoreData"))).identity);return a===b}catch(a){(h||(h=d("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1);return!0}}}g.attach=a}),98);